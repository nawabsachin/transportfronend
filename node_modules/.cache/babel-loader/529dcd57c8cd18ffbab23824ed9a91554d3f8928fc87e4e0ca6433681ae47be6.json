{"ast":null,"code":"import React,{useState,useEffect}from'react';import'./Form.css';import{Link,useNavigate}from'react-router-dom';import{jsx as _jsx,Fragment as _Fragment,jsxs as _jsxs}from\"react/jsx-runtime\";const Form=()=>{const[isLogin,setIsLogin]=useState(true);const[name,setName]=useState('');const[number,setNumber]=useState('');const[email,setEmail]=useState('');const[location,setLocation]=useState('');const[password,setPassword]=useState('');const navigate=useNavigate();// Redirect if already logged in\nuseEffect(()=>{if(localStorage.getItem('token')){navigate('/');}},[navigate]);const handleSubmit=async e=>{e.preventDefault();const endpoint=isLogin?'http://localhost:5000/api/login':'http://localhost:5000/api/register';const payload=isLogin?{email,password}:{name,number,email,location,password};try{const res=await fetch(endpoint,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(payload)});const data=await res.json();if(res.ok){alert(isLogin?'Login successful!':'Registered successfully!');if(data.token){localStorage.setItem('token',data.token);navigate('/');}}else if(res.status===409&&!isLogin){alert('User already exists. Redirecting to login...');setIsLogin(true);}else{alert(data.message||'Something went wrong');}}catch(err){console.error(err);alert('Server error. Try again later.');}};return/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"form-box\",children:[/*#__PURE__*/_jsx(\"h1\",{children:isLogin?'Login':'Sign Up'}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[!isLogin&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Full Name\",value:name,onChange:e=>setName(e.target.value),required:true}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Phone Number\",value:number,onChange:e=>setNumber(e.target.value),required:true}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Location\",value:location,onChange:e=>setLocation(e.target.value),required:true})]}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",placeholder:\"Email\",value:email,onChange:e=>setEmail(e.target.value),required:true}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",placeholder:\"Password\",value:password,onChange:e=>setPassword(e.target.value),required:true}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:isLogin?'Login':'Sign Up'}),/*#__PURE__*/_jsxs(\"p\",{children:[isLogin?\"Don't have an account?\":'Already have an account?',' ',/*#__PURE__*/_jsx(\"span\",{onClick:()=>setIsLogin(!isLogin),style:{color:'blue',cursor:'pointer'},children:isLogin?'Sign Up':'Login'})]})]}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"span\",{children:[\"Login as \",/*#__PURE__*/_jsx(Link,{to:\"/transport11/src/component/Login.jsx\",children:\"Admin\"})]})})]})});};export default Form;","map":{"version":3,"names":["React","useState","useEffect","Link","useNavigate","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","Form","isLogin","setIsLogin","name","setName","number","setNumber","email","setEmail","location","setLocation","password","setPassword","navigate","localStorage","getItem","handleSubmit","e","preventDefault","endpoint","payload","res","fetch","method","headers","body","JSON","stringify","data","json","ok","alert","token","setItem","status","message","err","console","error","className","children","onSubmit","type","placeholder","value","onChange","target","required","onClick","style","color","cursor","to"],"sources":["C:/Users/sharm/OneDrive/Desktop/Zaeesh/transport11/src/Form.js"],"sourcesContent":["\r\n\r\n\r\nimport React, { useState, useEffect } from 'react';\r\nimport './Form.css';\r\nimport { Link, useNavigate } from 'react-router-dom';\r\n\r\nconst Form = () => {\r\n  const [isLogin, setIsLogin] = useState(true);\r\n  const [name, setName] = useState('');\r\n  const [number, setNumber] = useState('');\r\n  const [email, setEmail] = useState('');\r\n  const [location, setLocation] = useState('');\r\n  const [password, setPassword] = useState('');\r\n  const navigate = useNavigate();\r\n\r\n  // Redirect if already logged in\r\n  useEffect(() => {\r\n    if (localStorage.getItem('token')) {\r\n      navigate('/');\r\n    }\r\n  }, [navigate]);\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n\r\n    const endpoint = isLogin\r\n      ? 'http://localhost:5000/api/login'\r\n      : 'http://localhost:5000/api/register';\r\n\r\n    const payload = isLogin\r\n      ? { email, password }\r\n      : { name, number, email, location, password };\r\n\r\n    try {\r\n      const res = await fetch(endpoint, {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify(payload),\r\n      });\r\n\r\n      const data = await res.json();\r\n\r\n      if (res.ok) {\r\n        alert(isLogin ? 'Login successful!' : 'Registered successfully!');\r\n        if (data.token) {\r\n          localStorage.setItem('token', data.token);\r\n          navigate('/');\r\n        }\r\n      } else if (res.status === 409 && !isLogin) {\r\n        alert('User already exists. Redirecting to login...');\r\n        setIsLogin(true);\r\n      } else {\r\n        alert(data.message || 'Something went wrong');\r\n      }\r\n    } catch (err) {\r\n      console.error(err);\r\n      alert('Server error. Try again later.');\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"container\">\r\n      <div className=\"form-box\">\r\n        <h1>{isLogin ? 'Login' : 'Sign Up'}</h1>\r\n        <form onSubmit={handleSubmit}>\r\n          {!isLogin && (\r\n            <>\r\n              <input type=\"text\" placeholder=\"Full Name\" value={name} onChange={(e) => setName(e.target.value)} required />\r\n              <input type=\"text\" placeholder=\"Phone Number\" value={number} onChange={(e) => setNumber(e.target.value)} required />\r\n              <input type=\"text\" placeholder=\"Location\" value={location} onChange={(e) => setLocation(e.target.value)} required />\r\n            </>\r\n          )}\r\n\r\n          <input type=\"email\" placeholder=\"Email\" value={email} onChange={(e) => setEmail(e.target.value)} required />\r\n          <input type=\"password\" placeholder=\"Password\" value={password} onChange={(e) => setPassword(e.target.value)} required />\r\n\r\n          <button type=\"submit\">{isLogin ? 'Login' : 'Sign Up'}</button>\r\n\r\n          <p>\r\n            {isLogin ? \"Don't have an account?\" : 'Already have an account?'}{' '}\r\n            <span onClick={() => setIsLogin(!isLogin)} style={{ color: 'blue', cursor: 'pointer' }}>\r\n              {isLogin ? 'Sign Up' : 'Login'}\r\n            </span>\r\n          </p>\r\n        </form>\r\n        <div>\r\n          <span>\r\n            Login as <Link to=\"/transport11/src/component/Login.jsx\">Admin</Link>\r\n          </span>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Form;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}