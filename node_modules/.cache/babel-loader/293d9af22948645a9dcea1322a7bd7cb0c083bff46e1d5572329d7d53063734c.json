{"ast":null,"code":"import React,{useState}from'react';import{useLocation,useNavigate}from'react-router-dom';import axios from'axios';import'./deliverypage.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const DeliveryInfoPage=()=>{const{state}=useLocation();const navigate=useNavigate();const product=state===null||state===void 0?void 0:state.product;const[formData,setFormData]=useState({name:'',alternateNumber:'',address:'',pincode:'',quantity:1});const handleChange=e=>{const{name,value}=e.target;setFormData(prev=>({...prev,[name]:value}));};const handleSubmit=async e=>{e.preventDefault();if(!(product!==null&&product!==void 0&&product._id)){alert('Product data is missing.');return;}const orderPayload={...formData,product:{_id:product._id,name:product.name,price:product.price},paymentMode:'COD'};try{const response=await axios.post('https://transportbackend-kappa.vercel.app/api/order',orderPayload,{headers:{'Content-Type':'application/json'}});if(response.status===201){alert('Order placed successfully!');navigate('/');}else{alert('Failed to place order.');}}catch(error){var _error$response;console.error('❌ Order Error:',((_error$response=error.response)===null||_error$response===void 0?void 0:_error$response.data)||error.message);alert('An error occurred while placing the order.');}};if(!product){return/*#__PURE__*/_jsx(\"p\",{className:\"no-product-message\",children:\"No product selected. Go back to the product page.\"});}return/*#__PURE__*/_jsxs(\"div\",{className:\"delivery-container\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"delivery-title\",children:\"Delivery Information\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"delivery-card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"product-info\",children:[/*#__PURE__*/_jsx(\"img\",{className:\"product-image\",src:`http://localhost:5000/uploads/${product.image}`,alt:product.name}),/*#__PURE__*/_jsx(\"h3\",{className:\"product-name\",children:product.name}),/*#__PURE__*/_jsxs(\"p\",{className:\"product-price\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Price:\"}),\" \\u20B9\",product.price]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"form-info\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"delivery-form\",children:[/*#__PURE__*/_jsxs(\"label\",{className:\"form-label\",children:[\"Full Name:\",/*#__PURE__*/_jsx(\"input\",{className:\"form-input\",type:\"text\",name:\"name\",value:formData.name,onChange:handleChange,required:true})]}),/*#__PURE__*/_jsxs(\"label\",{className:\"form-label\",children:[\"Alternate Number:\",/*#__PURE__*/_jsx(\"input\",{className:\"form-input\",type:\"tel\",name:\"alternateNumber\",value:formData.alternateNumber,onChange:handleChange,required:true})]}),/*#__PURE__*/_jsxs(\"label\",{className:\"form-label\",children:[\"Address:\",/*#__PURE__*/_jsx(\"textarea\",{className:\"form-input\",name:\"address\",value:formData.address,onChange:handleChange,required:true})]}),/*#__PURE__*/_jsxs(\"label\",{className:\"form-label\",children:[\"Pincode:\",/*#__PURE__*/_jsx(\"input\",{className:\"form-input\",type:\"text\",name:\"pincode\",value:formData.pincode,onChange:handleChange,required:true})]}),/*#__PURE__*/_jsxs(\"label\",{className:\"form-label\",children:[\"Quantity:\",/*#__PURE__*/_jsx(\"input\",{className:\"form-input\",type:\"number\",name:\"quantity\",value:formData.quantity,onChange:handleChange,min:\"1\",required:true})]}),/*#__PURE__*/_jsx(\"div\",{className:\"form-buttons\",children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"place-order-button\",children:\"Place Order\"})})]})})]})]});};export default DeliveryInfoPage;","map":{"version":3,"names":["React","useState","useLocation","useNavigate","axios","jsx","_jsx","jsxs","_jsxs","DeliveryInfoPage","state","navigate","product","formData","setFormData","name","alternateNumber","address","pincode","quantity","handleChange","e","value","target","prev","handleSubmit","preventDefault","_id","alert","orderPayload","price","paymentMode","response","post","headers","status","error","_error$response","console","data","message","className","children","src","image","alt","onSubmit","type","onChange","required","min"],"sources":["C:/Users/sharm/OneDrive/Desktop/Zaeesh/transport11/src/Pages/deliverypage.jsx"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { useLocation, useNavigate } from 'react-router-dom';\r\nimport axios from 'axios';\r\nimport './deliverypage.css';\r\n\r\nconst DeliveryInfoPage = () => {\r\n  const { state } = useLocation();\r\n  const navigate = useNavigate();\r\n  const product = state?.product;\r\n\r\n  const [formData, setFormData] = useState({\r\n    name: '',\r\n    alternateNumber: '',\r\n    address: '',\r\n    pincode: '',\r\n    quantity: 1,\r\n  });\r\n\r\n  const handleChange = (e) => {\r\n    const { name, value } = e.target;\r\n    setFormData((prev) => ({ ...prev, [name]: value }));\r\n  };\r\n\r\n const handleSubmit = async (e) => {\r\n  e.preventDefault();\r\n\r\n  if (!product?._id) {\r\n    alert('Product data is missing.');\r\n    return;\r\n  }\r\n\r\n  const orderPayload = {\r\n    ...formData,\r\n    product: {\r\n      _id: product._id,\r\n      name: product.name,\r\n      price: product.price,\r\n    },\r\n    paymentMode: 'COD',\r\n  };\r\n\r\n  try {\r\n    const response = await axios.post('https://transportbackend-kappa.vercel.app/api/order', orderPayload, {\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n      },\r\n    });\r\n\r\n    if (response.status === 201) {\r\n      alert('Order placed successfully!');\r\n      navigate('/');\r\n    } else {\r\n      alert('Failed to place order.');\r\n    }\r\n  } catch (error) {\r\n    console.error('❌ Order Error:', error.response?.data || error.message);\r\n    alert('An error occurred while placing the order.');\r\n  }\r\n};\r\n\r\n\r\n  if (!product) {\r\n    return <p className=\"no-product-message\">No product selected. Go back to the product page.</p>;\r\n  }\r\n\r\n  return (\r\n    <div className=\"delivery-container\">\r\n      <h2 className=\"delivery-title\">Delivery Information</h2>\r\n      <div className=\"delivery-card\">\r\n        <div className=\"product-info\">\r\n          <img\r\n            className=\"product-image\"\r\n            src={`http://localhost:5000/uploads/${product.image}`}\r\n            alt={product.name}\r\n          />\r\n          <h3 className=\"product-name\">{product.name}</h3>\r\n          <p className=\"product-price\">\r\n            <strong>Price:</strong> ₹{product.price}\r\n          </p>\r\n        </div>\r\n        <div className=\"form-info\">\r\n          <form onSubmit={handleSubmit} className=\"delivery-form\">\r\n            <label className=\"form-label\">\r\n              Full Name:\r\n              <input\r\n                className=\"form-input\"\r\n                type=\"text\"\r\n                name=\"name\"\r\n                value={formData.name}\r\n                onChange={handleChange}\r\n                required\r\n              />\r\n            </label>\r\n            <label className=\"form-label\">\r\n              Alternate Number:\r\n              <input\r\n                className=\"form-input\"\r\n                type=\"tel\"\r\n                name=\"alternateNumber\"\r\n                value={formData.alternateNumber}\r\n                onChange={handleChange}\r\n                required\r\n              />\r\n            </label>\r\n            <label className=\"form-label\">\r\n              Address:\r\n              <textarea\r\n                className=\"form-input\"\r\n                name=\"address\"\r\n                value={formData.address}\r\n                onChange={handleChange}\r\n                required\r\n              />\r\n            </label>\r\n            <label className=\"form-label\">\r\n              Pincode:\r\n              <input\r\n                className=\"form-input\"\r\n                type=\"text\"\r\n                name=\"pincode\"\r\n                value={formData.pincode}\r\n                onChange={handleChange}\r\n                required\r\n              />\r\n            </label>\r\n            <label className=\"form-label\">\r\n              Quantity:\r\n              <input\r\n                className=\"form-input\"\r\n                type=\"number\"\r\n                name=\"quantity\"\r\n                value={formData.quantity}\r\n                onChange={handleChange}\r\n                min=\"1\"\r\n                required\r\n              />\r\n            </label>\r\n            <div className=\"form-buttons\">\r\n              <button type=\"submit\" className=\"place-order-button\">\r\n                Place Order\r\n              </button>\r\n            </div>\r\n          </form>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default DeliveryInfoPage;\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,KAAQ,OAAO,CACvC,OAASC,WAAW,CAAEC,WAAW,KAAQ,kBAAkB,CAC3D,MAAO,CAAAC,KAAK,KAAM,OAAO,CACzB,MAAO,oBAAoB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAE5B,KAAM,CAAAC,gBAAgB,CAAGA,CAAA,GAAM,CAC7B,KAAM,CAAEC,KAAM,CAAC,CAAGR,WAAW,CAAC,CAAC,CAC/B,KAAM,CAAAS,QAAQ,CAAGR,WAAW,CAAC,CAAC,CAC9B,KAAM,CAAAS,OAAO,CAAGF,KAAK,SAALA,KAAK,iBAALA,KAAK,CAAEE,OAAO,CAE9B,KAAM,CAACC,QAAQ,CAAEC,WAAW,CAAC,CAAGb,QAAQ,CAAC,CACvCc,IAAI,CAAE,EAAE,CACRC,eAAe,CAAE,EAAE,CACnBC,OAAO,CAAE,EAAE,CACXC,OAAO,CAAE,EAAE,CACXC,QAAQ,CAAE,CACZ,CAAC,CAAC,CAEF,KAAM,CAAAC,YAAY,CAAIC,CAAC,EAAK,CAC1B,KAAM,CAAEN,IAAI,CAAEO,KAAM,CAAC,CAAGD,CAAC,CAACE,MAAM,CAChCT,WAAW,CAAEU,IAAI,GAAM,CAAE,GAAGA,IAAI,CAAE,CAACT,IAAI,EAAGO,KAAM,CAAC,CAAC,CAAC,CACrD,CAAC,CAEF,KAAM,CAAAG,YAAY,CAAG,KAAO,CAAAJ,CAAC,EAAK,CACjCA,CAAC,CAACK,cAAc,CAAC,CAAC,CAElB,GAAI,EAACd,OAAO,SAAPA,OAAO,WAAPA,OAAO,CAAEe,GAAG,EAAE,CACjBC,KAAK,CAAC,0BAA0B,CAAC,CACjC,OACF,CAEA,KAAM,CAAAC,YAAY,CAAG,CACnB,GAAGhB,QAAQ,CACXD,OAAO,CAAE,CACPe,GAAG,CAAEf,OAAO,CAACe,GAAG,CAChBZ,IAAI,CAAEH,OAAO,CAACG,IAAI,CAClBe,KAAK,CAAElB,OAAO,CAACkB,KACjB,CAAC,CACDC,WAAW,CAAE,KACf,CAAC,CAED,GAAI,CACF,KAAM,CAAAC,QAAQ,CAAG,KAAM,CAAA5B,KAAK,CAAC6B,IAAI,CAAC,qDAAqD,CAAEJ,YAAY,CAAE,CACrGK,OAAO,CAAE,CACP,cAAc,CAAE,kBAClB,CACF,CAAC,CAAC,CAEF,GAAIF,QAAQ,CAACG,MAAM,GAAK,GAAG,CAAE,CAC3BP,KAAK,CAAC,4BAA4B,CAAC,CACnCjB,QAAQ,CAAC,GAAG,CAAC,CACf,CAAC,IAAM,CACLiB,KAAK,CAAC,wBAAwB,CAAC,CACjC,CACF,CAAE,MAAOQ,KAAK,CAAE,KAAAC,eAAA,CACdC,OAAO,CAACF,KAAK,CAAC,gBAAgB,CAAE,EAAAC,eAAA,CAAAD,KAAK,CAACJ,QAAQ,UAAAK,eAAA,iBAAdA,eAAA,CAAgBE,IAAI,GAAIH,KAAK,CAACI,OAAO,CAAC,CACtEZ,KAAK,CAAC,4CAA4C,CAAC,CACrD,CACF,CAAC,CAGC,GAAI,CAAChB,OAAO,CAAE,CACZ,mBAAON,IAAA,MAAGmC,SAAS,CAAC,oBAAoB,CAAAC,QAAA,CAAC,mDAAiD,CAAG,CAAC,CAChG,CAEA,mBACElC,KAAA,QAAKiC,SAAS,CAAC,oBAAoB,CAAAC,QAAA,eACjCpC,IAAA,OAAImC,SAAS,CAAC,gBAAgB,CAAAC,QAAA,CAAC,sBAAoB,CAAI,CAAC,cACxDlC,KAAA,QAAKiC,SAAS,CAAC,eAAe,CAAAC,QAAA,eAC5BlC,KAAA,QAAKiC,SAAS,CAAC,cAAc,CAAAC,QAAA,eAC3BpC,IAAA,QACEmC,SAAS,CAAC,eAAe,CACzBE,GAAG,CAAE,iCAAiC/B,OAAO,CAACgC,KAAK,EAAG,CACtDC,GAAG,CAAEjC,OAAO,CAACG,IAAK,CACnB,CAAC,cACFT,IAAA,OAAImC,SAAS,CAAC,cAAc,CAAAC,QAAA,CAAE9B,OAAO,CAACG,IAAI,CAAK,CAAC,cAChDP,KAAA,MAAGiC,SAAS,CAAC,eAAe,CAAAC,QAAA,eAC1BpC,IAAA,WAAAoC,QAAA,CAAQ,QAAM,CAAQ,CAAC,UAAE,CAAC9B,OAAO,CAACkB,KAAK,EACtC,CAAC,EACD,CAAC,cACNxB,IAAA,QAAKmC,SAAS,CAAC,WAAW,CAAAC,QAAA,cACxBlC,KAAA,SAAMsC,QAAQ,CAAErB,YAAa,CAACgB,SAAS,CAAC,eAAe,CAAAC,QAAA,eACrDlC,KAAA,UAAOiC,SAAS,CAAC,YAAY,CAAAC,QAAA,EAAC,YAE5B,cAAApC,IAAA,UACEmC,SAAS,CAAC,YAAY,CACtBM,IAAI,CAAC,MAAM,CACXhC,IAAI,CAAC,MAAM,CACXO,KAAK,CAAET,QAAQ,CAACE,IAAK,CACrBiC,QAAQ,CAAE5B,YAAa,CACvB6B,QAAQ,MACT,CAAC,EACG,CAAC,cACRzC,KAAA,UAAOiC,SAAS,CAAC,YAAY,CAAAC,QAAA,EAAC,mBAE5B,cAAApC,IAAA,UACEmC,SAAS,CAAC,YAAY,CACtBM,IAAI,CAAC,KAAK,CACVhC,IAAI,CAAC,iBAAiB,CACtBO,KAAK,CAAET,QAAQ,CAACG,eAAgB,CAChCgC,QAAQ,CAAE5B,YAAa,CACvB6B,QAAQ,MACT,CAAC,EACG,CAAC,cACRzC,KAAA,UAAOiC,SAAS,CAAC,YAAY,CAAAC,QAAA,EAAC,UAE5B,cAAApC,IAAA,aACEmC,SAAS,CAAC,YAAY,CACtB1B,IAAI,CAAC,SAAS,CACdO,KAAK,CAAET,QAAQ,CAACI,OAAQ,CACxB+B,QAAQ,CAAE5B,YAAa,CACvB6B,QAAQ,MACT,CAAC,EACG,CAAC,cACRzC,KAAA,UAAOiC,SAAS,CAAC,YAAY,CAAAC,QAAA,EAAC,UAE5B,cAAApC,IAAA,UACEmC,SAAS,CAAC,YAAY,CACtBM,IAAI,CAAC,MAAM,CACXhC,IAAI,CAAC,SAAS,CACdO,KAAK,CAAET,QAAQ,CAACK,OAAQ,CACxB8B,QAAQ,CAAE5B,YAAa,CACvB6B,QAAQ,MACT,CAAC,EACG,CAAC,cACRzC,KAAA,UAAOiC,SAAS,CAAC,YAAY,CAAAC,QAAA,EAAC,WAE5B,cAAApC,IAAA,UACEmC,SAAS,CAAC,YAAY,CACtBM,IAAI,CAAC,QAAQ,CACbhC,IAAI,CAAC,UAAU,CACfO,KAAK,CAAET,QAAQ,CAACM,QAAS,CACzB6B,QAAQ,CAAE5B,YAAa,CACvB8B,GAAG,CAAC,GAAG,CACPD,QAAQ,MACT,CAAC,EACG,CAAC,cACR3C,IAAA,QAAKmC,SAAS,CAAC,cAAc,CAAAC,QAAA,cAC3BpC,IAAA,WAAQyC,IAAI,CAAC,QAAQ,CAACN,SAAS,CAAC,oBAAoB,CAAAC,QAAA,CAAC,aAErD,CAAQ,CAAC,CACN,CAAC,EACF,CAAC,CACJ,CAAC,EACH,CAAC,EACH,CAAC,CAEV,CAAC,CAED,cAAe,CAAAjC,gBAAgB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}